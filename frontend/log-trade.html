<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log New Trade - Trading Journal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js"></script>
    <link rel="stylesheet" href="css/log-trade.css">
</head>
<body>
    <div class="container">
        <header class="page-header">
            <h1 class="page-title">Log new trade</h1>
            <div class="header-actions">
                <button type="button" id="themeToggle" class="btn btn-icon-only" title="Toggle theme">
                    <iconify-icon icon="lucide:moon" style="font-size: 16px"></iconify-icon>
                </button>
                <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveCloseBtn">Save & close</button>
            </div>
        </header>

        <section class="form-card upload-section">
            <div class="ocr-header">
                <iconify-icon icon="lucide:scan-text" style="font-size: 20px"></iconify-icon>
                Import Trade from Screenshot (OCR)
            </div>
            <div class="ocr-desc">
                Upload a trade screenshot to automatically extract and fill trade details. Review all fields before saving.
            </div>
            <div class="form-group" style="display: flex; gap: 12px; align-items: flex-start;">
                <div style="flex: 1;">
                    <input type="file" id="ocrImageInput" accept="image/png,image/jpeg,image/jpg,image/webp" class="file-input">
                    <label for="ocrImageInput" class="file-label upload-field">
                        <iconify-icon icon="lucide:upload" style="font-size: 16px; margin-right: 8px"></iconify-icon>
                        <span id="ocrFileName">Choose screenshot...</span>
                    </label>
                </div>
                <button type="button" id="ocrAutofillBtn" class="btn btn-primary" style="height: 40px; padding: 0 20px; white-space: nowrap;" disabled>
                    <iconify-icon icon="lucide:scan-text" style="font-size: 16px; margin-right: 6px"></iconify-icon>
                    Autofill
                </button>
            </div>
            <div id="ocrStatus" class="ocr-status" style="display: none; margin-top: 8px;"></div>
        </section>

        <form id="tradeForm">
            <section class="form-card">
                <h2 class="card-title">Trade Details</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="label">Date & Time (IST)</label>
                        <div class="input-wrapper">
                            <input type="datetime-local" id="tradeDate" name="tradeDate" class="text-input" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Segment</label>
                        <div class="input-wrapper">
                            <select id="segment" name="segment" class="text-input" required>
                                <option value="">Select segment</option>
                                <option value="nse_cash">NSE Cash</option>
                                <option value="bse_cash">BSE Cash</option>
                                <option value="index_fno">Index F&O</option>
                            </select>
                            <iconify-icon icon="lucide:chevron-down" class="icon-right" style="font-size: 16px"></iconify-icon>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Instrument Type</label>
                        <div class="input-wrapper">
                            <select id="instrumentType" name="instrumentType" class="text-input" required>
                                <option value="">Select type</option>
                                <option value="equity">Equity</option>
                                <option value="futures">Futures</option>
                                <option value="options">Options</option>
                            </select>
                            <iconify-icon icon="lucide:chevron-down" class="icon-right" style="font-size: 16px"></iconify-icon>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Symbol</label>
                        <div class="input-wrapper">
                            <input type="text" id="symbol" name="symbol" class="text-input" placeholder="Search symbol (e.g., RELIANCE, NIFTY)" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Side</label>
                        <div class="input-wrapper">
                            <select id="side" name="side" class="text-input" required>
                                <option value="">Select side</option>
                                <option value="long">Long</option>
                                <option value="short">Short</option>
                            </select>
                            <iconify-icon icon="lucide:chevron-down" class="icon-right" style="font-size: 16px"></iconify-icon>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Quantity / Lots</label>
                        <div class="input-wrapper">
                            <input type="number" id="quantity" name="quantity" class="text-input" placeholder="Enter quantity" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Entry Price</label>
                        <div class="input-wrapper">
                            <span class="currency-symbol">₹</span>
                            <input type="number" id="entryPrice" name="entryPrice" class="text-input" step="0.01" placeholder="0.00" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Exit Price <span class="optional">(optional)</span></label>
                        <div class="input-wrapper">
                            <span class="currency-symbol">₹</span>
                            <input type="number" id="exitPrice" name="exitPrice" class="text-input" step="0.01" placeholder="0.00">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Stop Loss</label>
                        <div class="input-wrapper">
                            <span class="currency-symbol">₹</span>
                            <input type="number" id="stopLoss" name="stopLoss" class="text-input" step="0.01" placeholder="0.00" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Target</label>
                        <div class="input-wrapper">
                            <span class="currency-symbol">₹</span>
                            <input type="number" id="target" name="target" class="text-input" step="0.01" placeholder="0.00" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Product Type</label>
                        <div class="input-wrapper">
                            <select id="productType" name="productType" class="text-input" required>
                                <option value="">Select product type</option>
                                <option value="intraday">Intraday</option>
                                <option value="delivery">Delivery</option>
                                <option value="positional">Positional</option>
                            </select>
                            <iconify-icon icon="lucide:chevron-down" class="icon-right" style="font-size: 16px"></iconify-icon>
                        </div>
                    </div>
                </div>
            </section>

            <section class="form-card optional-section">
                <h2 class="card-title">F&O Specifics <span class="optional">(optional)</span></h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="label">Expiry Date</label>
                        <div class="input-wrapper">
                            <input type="date" id="expiryDate" name="expiryDate" class="text-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Lot Size</label>
                        <div class="input-wrapper">
                            <input type="number" id="lotSize" name="lotSize" class="text-input" placeholder="Enter lot size">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Strike Price</label>
                        <div class="input-wrapper">
                            <span class="currency-symbol">₹</span>
                            <input type="number" id="strikePrice" name="strikePrice" class="text-input" step="0.01" placeholder="0.00">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Option Type</label>
                        <div class="input-wrapper">
                            <select id="optionType" name="optionType" class="text-input">
                                <option value="">Select option type</option>
                                <option value="ce">CE (Call)</option>
                                <option value="pe">PE (Put)</option>
                                <option value="futures">Futures</option>
                            </select>
                            <iconify-icon icon="lucide:chevron-down" class="icon-right" style="font-size: 16px"></iconify-icon>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Position Status</label>
                        <div class="input-wrapper">
                            <select id="positionStatus" name="positionStatus" class="text-input">
                                <option value="">Select status</option>
                                <option value="closed">Closed</option>
                                <option value="open">Open</option>
                                <option value="scaled">Scaled in-out</option>
                            </select>
                            <iconify-icon icon="lucide:chevron-down" class="icon-right" style="font-size: 16px"></iconify-icon>
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label class="label">Linked India Market News <span class="optional">(optional)</span></label>
                        <div class="input-wrapper">
                            <input type="text" id="linkedNews" name="linkedNews" class="text-input" placeholder="Attach relevant market news or event">
                        </div>
                    </div>
                </div>
            </section>

            <section class="form-card optional-section">
                <h2 class="card-title">Strategy & Setup</h2>
                <div class="form-group" style="margin-bottom: 24px">
                    <label class="label">Setup Tags</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="setupTags" value="breakout">
                            <span class="checkbox-box"></span>
                            Breakout
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="setupTags" value="pullback">
                            <span class="checkbox-box"></span>
                            Pullback
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="setupTags" value="range">
                            <span class="checkbox-box"></span>
                            Range
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="setupTags" value="news_based">
                            <span class="checkbox-box"></span>
                            News-based
                        </label>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label class="label">Strategy Name</label>
                        <div class="input-wrapper">
                            <input type="text" id="strategyName" name="strategyName" class="text-input" placeholder="Enter strategy name">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Timeframe</label>
                        <div class="input-wrapper">
                            <select id="timeframe" name="timeframe" class="text-input">
                                <option value="">Select timeframe</option>
                                <option value="intraday">Intraday</option>
                                <option value="swing">Swing</option>
                                <option value="positional">Positional</option>
                            </select>
                            <iconify-icon icon="lucide:chevron-down" class="icon-right" style="font-size: 16px"></iconify-icon>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Risk (R) Taken</label>
                        <div class="input-wrapper">
                            <input type="number" id="riskTaken" name="riskTaken" class="text-input" step="0.1" placeholder="e.g., 1.0R, 2.0R">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Conviction Score</label>
                        <div class="input-wrapper">
                            <select id="convictionScore" name="convictionScore" class="text-input">
                                <option value="">Select score</option>
                                <option value="1">1 - Very Low</option>
                                <option value="2">2 - Low</option>
                                <option value="3">3 - Medium</option>
                                <option value="4">4 - High</option>
                                <option value="5">5 - Very High</option>
                            </select>
                            <iconify-icon icon="lucide:chevron-down" class="icon-right" style="font-size: 16px"></iconify-icon>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="label">Tags</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="tags" value="nifty">
                            <span class="checkbox-box"></span>
                            NIFTY
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="tags" value="banknifty">
                            <span class="checkbox-box"></span>
                            BANKNIFTY
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="tags" value="volatility">
                            <span class="checkbox-box"></span>
                            Volatility
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="tags" value="overtraded">
                            <span class="checkbox-box"></span>
                            Overtraded
                        </label>
                    </div>
                </div>
            </section>

            <section class="form-card">
                <h2 class="card-title">Psychology & Notes</h2>
                <div class="form-group full-width" style="margin-bottom: 20px">
                    <label class="label">Pre-trade Plan</label>
                    <div class="textarea-wrapper">
                        <textarea id="preTradePlan" name="preTradePlan" class="text-input" rows="4" placeholder="What was your plan before entering this trade?"></textarea>
                    </div>
                </div>

                <div class="form-group full-width" style="margin-bottom: 20px">
                    <label class="label">Post-trade Review</label>
                    <div class="textarea-wrapper">
                        <textarea id="postTradeReview" name="postTradeReview" class="text-input" rows="4" placeholder="Review your trade execution and outcome"></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <label class="label">Emotional State</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="emotionalState" value="calm">
                            <span class="checkbox-box"></span>
                            Calm
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="emotionalState" value="anxious">
                            <span class="checkbox-box"></span>
                            Anxious
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="emotionalState" value="fearful">
                            <span class="checkbox-box"></span>
                            Fearful
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="emotionalState" value="greedy">
                            <span class="checkbox-box"></span>
                            Greedy
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="emotionalState" value="revenge">
                            <span class="checkbox-box"></span>
                            Revenge trade
                        </label>
                    </div>
                </div>
            </section>
        </form>
    </div>

    <script src="js/theme.js"></script>
    <script src="js/log-trade.js"></script>
</body>
</html>
